# 구체성

어떤 요소에 적용된 CSS 스타일이 상충할 때 어떤 스타일을 적용할지 결정하기 위해 브라우저는 각 스타일에 구체성을 부여하고 판단하여 우선으로 적용할 것을 선택합니다.

### 구체성이란?

요소를 선택하는 데는 여러 방법이 있습니다.
따라서 서로 다른 선택자를 이용해 같은 요소를 선택할 수도 있습니다.
만약 같은 요소를 선택하는 서로 다른 규칙들이 상반된 스타일을 가지고 있다면 어떻게 표현이 될까요?

```css
h1 { color: red; }
body h1 { color: blue; }
```

두 규칙은 모두 `<h1>` 요소를 선택하게 됩니다.
하지만 두 규칙이 지정하는 스타일은 서로 다릅니다.
그렇다면 `<h1>`은 어떻게 표현이 될까요?
`<h1>`에는 color: blue 규칙이 적용이 되는데 이는 구체성과 연관이 있습니다.

선택자에는 어떤 규칙이 우선으로 적용되어야 하는지에 대해 정해진 규칙이 있습니다.
이 규칙을 '구체성'이라고 합니다.
구체성은 선택자를 얼마나 명시적으로(구체적으로) 선언했느냐를 수치화한 것으로,
구체성의 값이 클수록 우선으로 적용이 됩니다.

```css
0, 0, 0, 0
```

위와 같이 구체성은 4개의 숫자 값으로 이루어져 있습니다.
값을 비교할 때는 좌측에 있는 값부터 비교하며, 좌측 부분의 숫자가 클수록 높은 구체성을 갖습니다.
구체성은 아래의 규칙대로 계산됩니다.

- 0, 1, 0, 0 : 선택자에 있는 모든 id 속성값
- 0, 0, 1, 0 : 선택자에 있는 모든 class 속성값, 기타 속성, 가상 클래스
- 0, 0, 0, 1 : 선택자에 있는 모든 요소, 가상 요소
- 전체 선택자(*)는 0, 0, 0, 0을 가진다.
- 조합자는 구체성에 영향을 주지 않는다. ('>', '+', '~' 등)

```css
h1 { ... } /* 0, 0, 0, 1 */
body h1 { ... } /* 0, 0, 0, 2 */
.grape { ... } /* 0, 0, 1, 0 */
*.bright { ... } /* 0, 0, 1, 0 */
p.bright em.dark { ... } /* 0, 0, 2, 2 */
#page { ... } /* 0, 1, 0, 0 */
div#page { ... } /* 0, 1, 0, 1 */
```

h1 과 body h1 중 구체성이 높은 선택자는 body h1 이기때문에 실제 스타일 적용은 body h1 규칙이 우선하게 됩니다.
선택자의 구체성 값을 잘 알아야 많은 스타일 규칙들을 정의할 때 의도하지 않은 일이 생기지 않습니다.

### 인라인 스타일

그렇다면 인라인 스타일로 선언된 경우에는 어떻게 될까요?

```html
p#page { color: red; }

...
<p id="page" style="color: blue"> ... </p>
```

첫번째는 0, 1, 0, 1의 구체성을 가지는 선택자로 스타일을 선언했고,
두번째는 요소에 직접 인라인 스타일 방식으로 스타일을 선언했습니다.
결과적으로 `<p>`에는 color: blue가 적용됩니다.
**인라인 스타일의 구체성 값은 1, 0, 0, 0 이며 규칙들 중 가장 큰 구체성**을 갖기 때문입니다.

### important

important 키워드는 별도의 구체성 값은 없지만 모든 구체성을 무시하고 우선권을 갖습니다.
important 키워드는 속성값 뒤 한 칸 공백을 주고 느낌표 기호와 함께 씁니다.

```css
p#page { color: red !important; }

...
<p id="page" style="color: blue"> ... </p>
```

위의 `<p>`에는 important로 인해 color: red가 적용됩니다.

---

### 참고자료

[Cascade and inheritance](https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance)